<div class="gram-price-calculator-container">
  <div class="header">
    <h1>ğŸ’° Gramdan SatÄ±ÅŸ FiyatÄ± Hesaplama</h1>
    <p class="subtitle">Gram ve ayar bilgisi ile satÄ±ÅŸ fiyatÄ±nÄ± hÄ±zlÄ±ca hesaplayÄ±n</p>
  </div>

  <!-- Gold Price Display -->
  <div class="gold-price-section" *ngIf="goldPrice">
    <div class="price-card">
      <div class="price-label">GÃ¼ncel AltÄ±n FiyatÄ± (24 Ayar)</div>
      <div class="price-value">{{ goldPrice.selling | number:'1.2-2' }} â‚º/gr</div>
    </div>
  </div>

  <!-- Calculation Form -->
  <div class="calculation-section">
    <form [formGroup]="priceForm" (ngSubmit)="calculate()">
      <div class="form-grid">
        <!-- Ayar Selection -->
        <div class="form-group">
          <label for="ayar">Ayar *</label>
          <select id="ayar" formControlName="ayar" class="form-control">
            <option value="">Ayar SeÃ§in</option>
            <option *ngFor="let ayar of ayarOptions" [value]="ayar.value">
              {{ ayar.label }}
            </option>
          </select>
        </div>

        <!-- Gram Input -->
        <div class="form-group">
          <label for="gram">Gram *</label>
          <input 
            type="number" 
            id="gram" 
            formControlName="gram" 
            class="form-control"
            placeholder="Ã–rn: 10.50"
            step="0.01"
            min="0.01"
            max="10000"
          >
        </div>

        <!-- Ä°ÅŸÃ§ilik Input -->
        <div class="form-group">
          <label for="iscilik">Ä°ÅŸÃ§ilik (Milyem) *</label>
          <input 
            type="number" 
            id="iscilik" 
            formControlName="iscilik" 
            class="form-control"
            placeholder="Ã–rn: 250"
            step="1"
            min="0"
            max="1000"
          >
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="form-actions">
        <button type="submit" class="btn btn-primary" [disabled]="priceForm.invalid || isLoadingPrice">
          âš–ï¸ Hesapla
        </button>
        <button type="button" class="btn btn-secondary" (click)="reset()">
          ğŸ”„ Temizle
        </button>
      </div>
    </form>
  </div>

  <!-- Result Display -->
  <div class="result-section" *ngIf="totalPrice !== null">
    <div class="result-card">
      <h2>ğŸ“Š Hesaplama Sonucu</h2>
      
      <div class="result-breakdown">
        <div class="result-item">
          <span class="result-label">24 Ayar AltÄ±n FiyatÄ±:</span>
          <span class="result-value">{{ calculatedGoldPrice | number:'1.2-2' }} â‚º/gr</span>
        </div>
        <div class="result-item">
          <span class="result-label">Ayar KatsayÄ±sÄ± ({{ calculatedAyar }} Ayar):</span>
          <span class="result-value">{{ calculatedAyarRatio }}</span>
        </div>
        <div class="result-item" *ngIf="calculatedIscilik !== null">
          <span class="result-label">Ä°ÅŸÃ§ilik ({{ calculatedIscilik }} Milyem):</span>
          <span class="result-value">{{ calculatedIscilik }} / 1000 = {{ (calculatedIscilik / 1000) | number:'1.3-3' }}</span>
        </div>
        <div class="result-item" *ngIf="calculatedIscilik !== null && calculatedAyarRatio !== null">
          <span class="result-label">Toplam KatsayÄ±:</span>
          <span class="result-value">{{ calculatedAyarRatio }} + {{ (calculatedIscilik / 1000) | number:'1.3-3' }} = {{ (calculatedAyarRatio + (calculatedIscilik / 1000)) | number:'1.3-3' }}</span>
        </div>
        <div class="result-item" *ngIf="calculatedIscilik !== null && calculatedAyarRatio !== null">
          <span class="result-label">Gram BaÅŸÄ±na Fiyat:</span>
          <span class="result-value">{{ calculatedGoldPrice | number:'1.2-2' }} Ã— {{ (calculatedAyarRatio + (calculatedIscilik / 1000)) | number:'1.3-3' }} = {{ calculatedPricePerGram | number:'1.2-2' }} â‚º</span>
        </div>
        <div class="result-item">
          <span class="result-label">Toplam Gram:</span>
          <span class="result-value">{{ calculatedGram }} gr</span>
        </div>
        <div class="result-divider"></div>
        <div class="result-item">
          <span class="result-label">Hesaplama:</span>
          <span class="result-value">{{ calculatedPricePerGram | number:'1.2-2' }} Ã— {{ calculatedGram }} gr</span>
        </div>
        <div class="result-item result-total">
          <span class="result-label">Toplam SatÄ±ÅŸ FiyatÄ±:</span>
          <span class="result-value total-price">{{ calculatedTotalPrice | number:'1.2-2' }} â‚º</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Back Button -->
  <div class="back-section">
    <button class="btn btn-outline" routerLink="/">
      â† Ana Sayfaya DÃ¶n
    </button>
  </div>
</div>
